@using Microsoft.AspNetCore.Mvc.TagHelpers
@using WeatherApp.MVC.Models
@using System.Globalization
@model WeatherApp.MVC.Models.Weather

@{
	ViewBag.Title = "title";
	Layout = "_Layout";

	var weatherApiResponse = ViewBag.WeatherResponse as WeatherApiResponse;
}

@{
	await Html.RenderPartialAsync("_Header");
}

<div class="hero" data-bg-image="images/banner.png">
	<div class="container">
		<form asp-controller="Weather" asp-action="Index" method="post" class="find-location">
			<input type="text" placeholder="Find your location..." asp-for="CityName" />
			<input type="submit" value="Find">
		</form>

	</div>
</div>

<div class="forecast-table">
	<div class="container">
		<div class="forecast-container">
			<div class="today forecast">
				<div class="forecast-header">
					<div class="day">@weatherApiResponse.forecast.forecastday.First().date</div>
					
				</div> <!-- .forecast-header -->
				<div class="forecast-content">
					<div class="location">@weatherApiResponse.location.country / @weatherApiResponse.location.name</div>
					<div class="degree">

						<div class="num">@weatherApiResponse!.current.temp_c<sup>o</sup>C</div>

						<div class="forecast-icon">
							<img src="@weatherApiResponse.current.condition.icon" alt="" width=90>
						</div>
					</div>

				</div>
			</div>
			@foreach (var forecast in weatherApiResponse.forecast.forecastday)
			{

				<div class="forecast">
					<div class="forecast-header">
						<div class="day">@Convert.ToDateTime(forecast.date).AddDays(1).DayOfWeek</div>
					</div> <!-- .forecast-header -->
					<div class="forecast-content">
						<div class="forecast-icon">
							<img src="@forecast.day.condition.icon" alt="" width=48>
						</div>
						<div class="degree">@forecast.day.avgtemp_c<sup>o</sup>C</div>
						<small>@forecast.day.mintemp_c<sup>o</sup></small>
					</div>
				</div>
			}
			
		</div>
		<hr>
		<div class="hourly-forecast container">
			<div style="height: 1px;"></div>
			<div class="forecast-header" style="text-align: center;">
				<div style="font-size: 18px;font-weight: bold; margin:15px 0 5px 0">Saatlik tahmin</div>
			</div> <!-- .forecast-header -->
			<div class="forecast-content">

				@foreach (var hour in weatherApiResponse.forecast.forecastday[0].hour)
				{

					<div class="hourly-forecast-table">
						<div class="time">@Convert.ToDateTime(hour.time).ToShortTimeString()</div>
						<div class="weather-icon">
							<img src="@hour.condition.icon" alt="">
						</div>
						<div class="temp">@hour.temp_c<sup>o</sup>C</div>
					</div>
				}


			</div>
			<hr style="width: 33%; margin-top: 15px; margin-bottom: 15px;">

			<div class="detail-forecast">
				<div class="detail-header" style="text-align: center;">
					<div style="font-size: 18px;font-weight: bold; margin:5px 0 0 0">Detaylar</div>
				</div> <!-- .forecast-header -->

				<div class="detail-content">
					<div class="col-md-7">
						<div class="detail-row" style="margin-top: 25px;">
							<div class="detail-col col-md-2">
								<div class="detail-label"><b>Rüzgar</b></div>
								<div class="detail-value">@weatherApiResponse.current.wind_kph km/h</div>
								<div class="detail-icon">
									<img src="images/icon-wind.png" alt="" srcset="">
								</div>
							</div>
							<div class="detail-col col-md-2">
								<div class="detail-label"><b>Yön</b></div>
								<div class="detail-value">@weatherApiResponse.Wind()</div>
								<div class="detail-icon">
									<img src="images/icon-compass.png" alt="" srcset="">
								</div>
							</div>
							@*<div class="detail-col col-md-2">
								<div class="detail-label"><b>Nem</b></div>
								<div class="detail-value">@weatherApiResponse.currentkm/h</div>
							</div>*@
							<div class="detail-col col-md-2">
								<div class="detail-label"><b>Yağmur</b></div>
								<div class="detail-value">@weatherApiResponse.forecast.forecastday[0].day.daily_will_it_rain %</div>
								<div class="detail-icon">
									<img src="images/icon-umberella.png" alt="" srcset="">
								</div>
							</div>
							<div class="detail-col col-md-2">
								<div class="detail-label"><b>Basınç</b></div>
								<div class="detail-value">@weatherApiResponse.current.pressure_in hPa</div>
							</div>
						</div> <!-- .detail-row -->
					</div>
					<div class="col-md-5">

						<div class="sun-detail-row"
							 style="/* background-color: aqua; */width: 100%;height: 55px;margin-top: 25px;">
							<div id="sun-id1"></div>
							<div id="sun-id2">
								<div id="sunUp" style="float: left;"><b>@weatherApiResponse.forecast.forecastday[0].astro.sunrise</b></div> <div id="sunDown" style="float: right;"><b>@weatherApiResponse.forecast.forecastday[0].astro.sunset</b></div>
							</div>
							<div id="sun-id3"></div>
							@{
								var dt1 = DateTime.ParseExact(weatherApiResponse.forecast.forecastday[0].astro.sunrise, "hh:mm tt", CultureInfo.InvariantCulture);
								var dt2 = DateTime.ParseExact(weatherApiResponse.forecast.forecastday[0].astro.sunset, "hh:mm tt", CultureInfo.InvariantCulture);
								var fark = dt2 - dt1;
								var now = DateTime.Now;
								var gecenSure = now - dt1;
								var yuzde = (gecenSure.TotalSeconds / fark.TotalSeconds) * 100 / 2;
								var sun_yuzde = Math.Round(yuzde, 0);
							}
							@if (sun_yuzde >= 49)
							{
								<div id="sun-id4" style="left: @sun_yuzde%"></div>

							}
							
						</div>
					</div>
				</div> <!-- .detail-content -->
			</div> <!-- .detail-forecast -->
		</div> <!-- hourly-forecast -->


	</div>
</div>
<main class="main-content">
	<div class="fullwidth-block">
	</div>

	@*<div class="fullwidth-block" data-bg-color="#262936">
	<div class="container">
	<div class="row">
	<div class="col-md-4">
	<div class="news">
	<div class="date">06.10</div>
	<h3><a href="#">Doloremque laudantium totam sequi </a></h3>
	<p>
	Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illo saepe assumenda
	dolorem modi, expedita voluptatum ducimus necessitatibus. Asperiores quod
	reprehenderit necessitatibus harum, mollitia, odit et consequatur maxime nisi
	amet
	doloremque.
	</p>
	</div>
	</div>
	<div class="col-md-4">
	<div class="news">
	<div class="date">06.10</div>
	<h3><a href="#">Doloremque laudantium totam sequi </a></h3>
	<p>
	Nobis architecto consequatur ab, ea, eum autem aperiam accusantium placeat vitae
	facere explicabo temporibus minus distinctio cum optio quis, dignissimos eius
	aspernatur fuga. Praesentium totam, corrupti beatae amet expedita veritatis.
	</p>
	</div>
	</div>
	<div class="col-md-4">
	<div class="news">
	<div class="date">06.10</div>
	<h3><a href="#">Doloremque laudantium totam sequi </a></h3>
	<p>
	Enim impedit officiis placeat qui recusandae doloremque possimus, iusto
	blanditiis,
	quam optio delectus maiores. Possimus rerum, velit cum natus eos. Cumque
	pariatur
	beatae asperiores, esse libero quas ad dolorem. Voluptates.
	</p>
	</div>
	</div>
	</div>
	</div>
	</div>
	*@
	<div class="fullwidth-block">
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<h2 class="section-title">Application features</h2>
					<ul class="arrow-feature">
						<li>
							<h3>Natus error sit voluptatem accusantium</h3>
							<p>
								Doloremque laudantium totam rem aperiam Inventore veritatis et quasi
								architecto
								beatae vitae.
							</p>
						</li>
						<li>
							<h3>Natus error sit voluptatem accusantium</h3>
							<p>
								Doloremque laudantium totam rem aperiam Inventore veritatis et quasi
								architecto
								beatae vitae.
							</p>
						</li>
						<li>
							<h3>Natus error sit voluptatem accusantium</h3>
							<p>
								Doloremque laudantium totam rem aperiam Inventore veritatis et quasi
								architecto
								beatae vitae.
							</p>
						</li>
					</ul>
				</div>
				<div class="col-md-4">
					<h2 class="section-title">Weather analyssis</h2>
					<ul class="arrow-list">
						<li><a href="#">Accusantium doloremque laudantium rem aperiam</a></li>
						<li><a href="#">Eaque ipsa quae ab illo inventore veritatis quasi</a></li>
						<li><a href="#">Architecto beatae vitae dicta sunt explicabo</a></li>
						<li><a href="#">Nemo enim ipsam voluptatem quia voluptas</a></li>
						<li><a href="#">Aspernatur aut odit aut fugit, sed quia consequuntur</a></li>
						<li><a href="#">Magni dolores eos qui ratione voluptatem sequi</a></li>
						<li><a href="#">Neque porro quisquam est qui dolorem ipsum quia</a></li>
					</ul>
				</div>
				<div class="col-md-4">
					<h2 class="section-title">Awesome Photos</h2>
					<div class="photo-grid">
						<a href="#"><img src="images/thumb-1.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-2.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-3.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-4.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-5.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-6.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-7.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-8.jpg" alt="#"></a>
						<a href="#"><img src="images/thumb-9.jpg" alt="#"></a>
					</div>
				</div>
			</div>
		</div>
	</div>
</main> <!-- .main-content -->
@{
	await Html.RenderPartialAsync("_Footer");
}
